#include "TString.h"

#include "MakeSpinWorkspace.C"

enum Config {kICHEP,kICHEP_53X,kRun2012C,kHCP,kICHEPtest,kHCPtest,kRun2012Ctest};

void getData(Config cfg,TString &data, TString &hgg,TString &rsg,int &runMin, int &runMax){

  TString datas[] = {"/home/amott/HggApp/skim/Photon_ToSepTS_rescale_MVAPresel_Prompt_loosePt.root",
		     "/home/amott/HggApp/skim/Photon_ToSepTS_rescale_MVAPresel_Prompt_13Jul2012_loosePt.root",
		     "/home/amott/HggApp/skim/Photon_ToSepTS_MVAPresel_PromptAnd13Jul2012_loosePt.root",
		     "/home/amott/HggApp/skim/Latest/DoublePhoton_Run2012ABC.root",
		     "/home/amott/HggApp/skim/Latest/DoublePhoton_Run2012AB.root",
		     "/home/amott/HggApp/skim/Latest/DoublePhoton_Run2012C_Prompt.root"};
  TString hggs[] = {"/mnt/hadoop/store/user/amott/Hgg2012/MC/GluGluToHToGG_M-125_8TeV-powheg-pythia6/Summer12-PU_S7_START52_V9-v1/Selected_LoosePt/GluGluToHToGG_M-125_8TeV-powheg-pythia6_0.root",
		    "/mnt/hadoop/store/user/amott/Hgg2012/MC/GluGluToHToGG_M-125_8TeV-powheg-pythia6/Summer12_DR53X-PU_S10_STAR53_V7A-v1/Selected_LoosePt//GluGluToHToGG_M-125_8TeV-powheg-pythia6_0.root"};
  TString rsgs[] = {"/mnt/hadoop/store/user/amott/Hgg2012/MC/RSGravGG_kMpl001_M125_TuneZ2star_8TeV_pythia6/Summer12-PU_S7_START52_V9-v1/Selected_LoosePt/RSGravGG_kMpl001_M125_TuneZ2star_8TeV_pythia6_0.root"};

  switch(cfg){
  case kICHEP:
    data = datas[0];
    hgg = hggs[0];
    rsg=rsgs[0];
    runMin=0;
    runMax=196532;
    break;
  case kICHEP_53X:
    data = datas[1];
    hgg = hggs[1];
    rsg=rsgs[0];
    runMin=0;
    runMax=196532;
    break;
  case kRun2012C:
    data = datas[1];
    hgg = hggs[1];
    rsg=rsgs[0];
    runMin=196532;
    runMax=203756;
    break;
  case kHCP:
    data = datas[1];
    hgg = hggs[1];
    rsg=rsgs[0];
    runMin=0;
    runMax=203756;
    break;
  case kICHEPtest:
    data = datas[4];
    hgg = hggs[1];
    rsg=rsgs[0];
    runMin=0;
    runMax=203756;
    break;
  case kHCPtest:
    data = datas[3];
    hgg = hggs[1];
    rsg=rsgs[0];
    runMin=0;
    runMax=203756;
    break;
  case kRun2012Ctest:
    data = datas[5];
    hgg = hggs[1];
    rsg=rsgs[0];
    runMin=0;
    runMax=203756;
    break;
  default:
    break;
  }
}

void runWorkspaces(TString workspaceName, TString fitWorkspaceName, Config cfg, int selectionMap=0,bool makeWorkspaces=false, 
		   bool runFits=false,bool requireCiC=false){


  TString data,hgg,rsg; 
  int runMin,runMax;

  getData(cfg,data,hgg,rsg,runMin,runMax);
  std::cout << data <<std::endl << hgg << std::endl << rsg << std::endl << runMin << " - " << runMax << std::endl;
  
  //if(makeWorkspaces) MakeWorkspaces(data,hgg,rsg,workspaceName,selectionMap,requireCiC,runMin,runMax,"SigE_rescale_fromZmmg.root");
  if(makeWorkspaces) MakeWorkspaces(data,hgg,rsg,workspaceName,selectionMap,requireCiC,runMin,runMax,"");
  if(runFits)   RunAllFits(workspaceName,fitWorkspaceName);
}

